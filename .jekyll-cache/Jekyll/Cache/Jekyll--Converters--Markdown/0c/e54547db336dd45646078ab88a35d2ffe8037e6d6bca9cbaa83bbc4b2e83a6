I"™ <h1 id="æ­å»ºwebæœåŠ¡å™¨">æ­å»ºWebæœåŠ¡å™¨</h1>

<h2 id="v20-è¯·æ±‚ç»“æœ404çš„æ­£ç¡®å†™æ³•">v2.0 è¯·æ±‚ç»“æœ404çš„æ­£ç¡®å†™æ³•</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s2">`htdocs</span><span class="p">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="dl">'</span><span class="s1">404</span><span class="dl">'</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">Not Found</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">});</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
</code></pre></div></div>
<p>åœ¨<code class="highlighter-rouge">v1.0</code>ä¸­ï¼Œæ²¡æ‰¾åˆ°èµ„æºçš„æƒ…å†µä¸‹ç›´æ¥é€šè¿‡<code class="highlighter-rouge">res.write('404')</code>å†™è¿”å›å‰ç«¯çš„å†…å®¹ï¼Œä½†æ˜¯è¿™æ˜¯å†™åœ¨è¿”å›ç»“æœçš„<code class="highlighter-rouge">ä½“</code>ä¸­çš„ï¼Œæ­¤æ—¶å¦‚æœåœ¨æµè§ˆå™¨ç«¯æŸ¥çœ‹çŠ¶æ€ç ä¾ç„¶æ˜¯<code class="highlighter-rouge">200</code>ï¼Œä¸ºæ­¤éœ€è¦ä½¿ç”¨<code class="highlighter-rouge">writeHead()</code>æ–¹æ³•ï¼Œè¿™ä½¿å¾—çŠ¶æ€ç çœŸçš„å˜æˆ<code class="highlighter-rouge">404</code>ã€‚</p>

<h2 id="v21-å¤„ç†getå’Œpostè¯·æ±‚">v2.1 å¤„ç†GETå’ŒPOSTè¯·æ±‚</h2>

<p>ä½œä¸ºä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œå…¶å·¥ä½œåŒ…æ‹¬ï¼š</p>

<ul>
  <li>è¿”å›æ–‡ä»¶</li>
  <li>ä¸å‰ç«¯æ•°æ®äº¤äº’(<code class="highlighter-rouge">GET</code>ã€<code class="highlighter-rouge">POST</code>)
    <ul>
      <li><code class="highlighter-rouge">GET</code>æ•°æ®ï¼š<code class="highlighter-rouge">url</code>é‡Œé¢ï¼Œå°ï¼Œæœ€å¤š32K</li>
      <li><code class="highlighter-rouge">POST</code>æ•°æ®ï¼šä½œä¸º<code class="highlighter-rouge">body</code>ï¼Œå¤§ï¼Œæœ€å¤š1G</li>
    </ul>
  </li>
  <li>ä¸æ•°æ®åº“äº¤äº’</li>
</ul>

<p>ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¯ä»¥è®©å‰ç«¯è®¿é—®<code class="highlighter-rouge">htdocs</code>æ–‡ä»¶å¤¹ä¸­å­˜åœ¨çš„æ–‡ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰å®ç°åé¢ä¸¤ä¸ªåŠŸèƒ½ï¼Œä¸‹é¢å®ç°å¤„ç†<code class="highlighter-rouge">GET</code>å’Œ<code class="highlighter-rouge">POST</code>è¯·æ±‚ã€‚</p>

<h3 id="å¤„ç†get">å¤„ç†GET</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"http://localhost:8080/api"</span> <span class="na">method=</span><span class="s">"get"</span><span class="nt">&gt;</span>
    ç”¨æˆ·åï¼š<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"username"</span><span class="nt">&gt;&lt;br&gt;</span>
    å¯†ç ï¼š<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">name=</span><span class="s">"password"</span><span class="nt">&gt;&lt;br&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"æäº¤"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">url</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span><span class="nx">pathname</span><span class="p">,</span> <span class="nx">query</span><span class="p">}</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">pathname</span><span class="p">);</span> <span class="c1">// /api</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span> <span class="c1">// { username: 'jacktown', password: '122345' }</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">()</span>
<span class="p">});</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">GET</code>è¯·æ±‚çš„å‚æ•°æ”¾åœ¨<code class="highlighter-rouge">url</code>ä¸­ï¼Œä½¿ç”¨<code class="highlighter-rouge">node</code>ä¸­çš„<code class="highlighter-rouge">url</code>æ¨¡å—æ¥è§£æå°±å¯ä»¥äº†ã€‚</p>

<h3 id="å¤„ç†post">å¤„ç†POST</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">querystring</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">querystring</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span> <span class="c1">// æš‚æ—¶ä½¿ç”¨string,å¾…æ”¹è¿›</span>
    <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="nx">str</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">querystring</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span> <span class="c1">// { username: 'jacktown', password: '123' }</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">()</span>
    <span class="p">});</span>

<span class="p">});</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">POST</code>è¯·æ±‚ä¸­ï¼Œè¡¨å•çš„æ•°æ®åœ¨è¯·æ±‚ä½“ä¸­ï¼Œéœ€è¦ä»ä¸­è§£ææ•°è¯·æ±‚å‚æ•°</li>
  <li>è¯·æ±‚ä½“çš„æ•°æ®å¯èƒ½æ˜¯å¾ˆå¤§ï¼Œéœ€è¦åˆ‡æˆå¾ˆå¤šä¸ªå°æ•°æ®åŒ…ä¼ è¾“ï¼ŒåŸå› ï¼š
    <ul>
      <li>æ–¹ä¾¿æ‰€æœ‰äººï¼ˆå¦åˆ™å¦‚æœå…è®¸å¾ˆå¤§æ•°æ®åŒ…ä¸€æ¬¡æ€§ä¼ è¾“ï¼Œè¿™å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œé‚£ä¹ˆè¯¥ç½‘ç»œé€šè·¯ä¸Šå…¶ä»–ç”¨æˆ·ç½‘ç»œå°±ç›¸å½“äºæ–­æ‰äº†ï¼‰</li>
      <li>å®¹é”™å¼ºå¾—å¤šï¼ˆå¦‚æœæŸæ•°æ®åŒ…æœ‰é”™ï¼Œåªéœ€è¦é‡ä¼ é”™è¯¯çš„åŒ…å°±å¯ä»¥äº†ï¼‰</li>
    </ul>
  </li>
  <li>æ¯æ¬¡æ•°æ®æ•°æ®åˆ°è¾¾è§¦å‘<code class="highlighter-rouge">request</code>çš„<code class="highlighter-rouge">data</code>äº‹ä»¶ï¼Œä¼ è¾“å®Œæˆè§¦å‘<code class="highlighter-rouge">end</code>äº‹ä»¶</li>
</ul>

<h2 id="v22-ç®€å•å®ç°ç™»å½•æ³¨å†Œ">v2.2 ç®€å•å®ç°ç™»å½•æ³¨å†Œ</h2>

<p>å®é™…å¼€å‘ä¸­è¯¥åŠŸèƒ½ä¼šéœ€è¦åœ¨æ•°æ®åº“è·å–æ•°æ®å’Œå†™å…¥æ•°æ®ï¼›å‰ç«¯ä¸èƒ½ç›´æ¥æ“ä½œæ•°æ®åº“ï¼Œéƒ½æ˜¯ç”±æœåŠ¡ç«¯åšä¸­é—´äººï¼Œå‰åç«¯éœ€è¦æŒ‡å®šä¸€å¥—æ¥å£ï¼ˆç¡®å®šã€å¹¶ä¸”å†™æˆæ¥å£æ–‡æ¡£ï¼‰ã€‚</p>

<p>å¯¹äºåå°æ¥è¯´ï¼Œå®‰å…¨æ€§å¾ˆé‡è¦ï¼Œè€Œ99.9%çš„æ¼æ´éƒ½æ˜¯æ‡’ã€‚</p>

<ul>
  <li>ä¸€åˆ‡æ¥è‡ªå‰å°çš„æ•°æ®éƒ½ä¸å¯ä¿¡</li>
  <li>å‰åå°éƒ½å¾—è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œä½†æ˜¯ç›®çš„ä¸åŒ
    <ul>
      <li>å‰å°æ ¡éªŒï¼šç”¨æˆ·ä½“éªŒ</li>
      <li>åå°æ ¡éªŒï¼šå®‰å…¨æ€§</li>
    </ul>
  </li>
</ul>

<p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œåœ¨ä¸ä½¿ç”¨æ•°æ®åº“çš„æƒ…å†µä¸‹ï¼Œåå°ç¨‹åºç®€å•åœ°ç”¨ä¸€ä¸ª<code class="highlighter-rouge">users</code>å¯¹è±¡æ¥å®Œæˆæ³¨å†Œä¸ç™»å½•ç”¨æˆ·æ•°æ®çš„å­˜å‚¨ã€‚åŸºæœ¬æ€è·¯å¦‚ä¸‹ï¼š</p>

<ul>
  <li>ç”¨æˆ·æ³¨å†Œï¼š
    <ul>
      <li>/reg?user=xxx&amp;pass=xxx =&gt; {err: 0, msg: â€˜è¯´æ˜â€™}</li>
    </ul>
  </li>
  <li>ç”¨æˆ·ç™»é™†ï¼š
    <ul>
      <li>/login?user=xxx&amp;pass=xxx =&gt; {err: 0, msg: â€˜è¯´æ˜â€™}</li>
    </ul>
  </li>
</ul>

<p>å‰ç«¯é€šè¿‡<code class="highlighter-rouge">/reg</code>å’Œ<code class="highlighter-rouge">/login</code>ä¸¤ä¸ªæ¥å£è®¿é—®åå°ï¼Œåå°ä»£ç é€šè¿‡åˆ¤æ–­è¯·æ±‚çš„è®¿é—®è·¯å¾„<code class="highlighter-rouge">pathname</code>ï¼Œæ¥å°†è¯·æ±‚åˆ†ä¸ºç™»å½•ã€æ³¨å†Œã€é™æ€èµ„æºï¼Œå¯¹äºæ‰¾ä¸åˆ°/ä¸å­˜åœ¨çš„é™æ€èµ„æºï¼Œè¿”å›<code class="highlighter-rouge">Not Found</code>ã€‚</p>

<h3 id="å‰ç«¯ä»£ç ">å‰ç«¯ä»£ç </h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"regOrLogin"</span><span class="nt">&gt;</span>
        ç”¨æˆ·å: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"username"</span><span class="nt">&gt;&lt;br&gt;</span>
        å¯†ç ï¼š<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">id=</span><span class="s">"password"</span><span class="nt">&gt;&lt;br&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"reg"</span><span class="nt">&gt;</span>æ³¨å†Œ<span class="nt">&lt;/button&gt;&lt;button</span> <span class="na">id=</span><span class="s">"login"</span><span class="nt">&gt;</span>ç™»å½•<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./jquery-2.0.3.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#reg</span><span class="dl">'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="kd">let</span> <span class="nx">username</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#username</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">password</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#password</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">username</span> <span class="o">||</span> <span class="o">!</span><span class="nx">password</span><span class="p">){</span>
            <span class="c1">// simple front end validation</span>
            <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">ç”¨æˆ·åå¯†ç ä¸å¯ä¸ºç©º</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="c1">// post to backend using ajax</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/reg</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">},</span>
                <span class="na">dataType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span>
                <span class="nx">success</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">error</span><span class="p">){</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">æ­å–œæ‚¨ï¼Œæ³¨å†ŒæˆåŠŸï¼</span><span class="dl">'</span><span class="p">)</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">æŠ±æ­‰ï¼Œæ³¨å†Œå¤±è´¥ï¼š</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
                    <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">æ•°æ®æäº¤å¤±è´¥</span><span class="dl">'</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#login</span><span class="dl">'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="kd">let</span> <span class="nx">username</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#username</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
            <span class="nx">password</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#password</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">username</span> <span class="o">||</span> <span class="o">!</span><span class="nx">password</span><span class="p">){</span>
            <span class="c1">// simple front end validation</span>
            <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">ç”¨æˆ·åå¯†ç ä¸å¯ä¸ºç©º</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="c1">// post to backend using ajax</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
                <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/login</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">},</span>
                <span class="na">dataType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">,</span>
                <span class="nx">success</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">error</span><span class="p">){</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">æ­å–œæ‚¨ï¼Œç™»å½•æˆåŠŸï¼</span><span class="dl">'</span><span class="p">);</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                        <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">æŠ±æ­‰ï¼Œç™»å½•å¤±è´¥ï¼š</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
                    <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">æ•°æ®æäº¤å¤±è´¥</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<h3 id="åç«¯ä»£ç ">åç«¯ä»£ç </h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">url</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">querystring</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">querystring</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">users</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// "name": "password"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span><span class="nx">pathname</span><span class="p">,</span> <span class="nx">query</span><span class="p">}</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
    
    <span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span> <span class="c1">// æš‚æ—¶ä½¿ç”¨string,å¾…æ”¹è¿›</span>
    <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="nx">str</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">querystring</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
        <span class="kd">let</span> <span class="p">{</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">;</span>
        <span class="k">switch</span><span class="p">(</span><span class="nx">pathname</span><span class="p">){</span>
            <span class="k">case</span> <span class="dl">'</span><span class="s1">/reg</span><span class="dl">'</span><span class="p">:</span>
                <span class="c1">// æ³¨å†Œæ¥å£</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">username</span><span class="p">){</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"error": 1, "msg": "ç”¨æˆ·åä¸èƒ½ä¸ºç©º"}</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="sr">/^</span><span class="se">\w{6,20}</span><span class="sr">$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">username</span><span class="p">)){</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"error": 1, "msg": "ç”¨æˆ·åå¿…é¡»ä¸º6-20ä½çš„æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿"}</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">users</span><span class="p">[</span><span class="nx">username</span><span class="p">]){</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"error": 1, "msg": "è¯¥ç”¨æˆ·åå·²è¢«å ç”¨"}</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">password</span> <span class="o">||</span> <span class="o">!</span><span class="sr">/.</span><span class="se">{8,16}</span><span class="sr">/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">password</span><span class="p">)){</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"error": 1, "msg": "å¯†ç å¿…é¡»ä¸º8-16ä½å­—ç¬¦"}</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr">'"</span><span class="se">]</span><span class="sr">/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">password</span><span class="p">)){</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"error": 1, "msg": "å¯†ç ä¸èƒ½åŒ…å«å¼•å·"}</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="nx">users</span><span class="p">[</span><span class="nx">username</span><span class="p">]</span> <span class="o">=</span> <span class="nx">password</span><span class="p">;</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"error": 0, "msg": "register succeed."}</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="dl">'</span><span class="s1">/login</span><span class="dl">'</span><span class="p">:</span>
                <span class="c1">// ç™»å½•æ¥å£</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">username</span> <span class="o">||</span> <span class="o">!</span><span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"error": 2, "msg": "ç”¨æˆ·åä¸å¯†ç ä¸èƒ½ä¸ºç©º"}</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">users</span><span class="p">[</span><span class="nx">username</span><span class="p">]</span> <span class="o">||</span> <span class="nx">users</span><span class="p">[</span><span class="nx">username</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"error": 2, "msg": "ç”¨æˆ·åæˆ–å¯†ç æœ‰è¯¯"}</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"error": 0, "msg": "log in succeed."}</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="nl">default</span><span class="p">:</span>
                <span class="c1">// é™æ€èµ„æº</span>
                <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s2">`htdocs</span><span class="p">${</span><span class="nx">pathname</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
                        <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="dl">'</span><span class="s1">404</span><span class="dl">'</span><span class="p">);</span>
                        <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">Not Found</span><span class="dl">'</span><span class="p">)</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                        <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
                <span class="p">});</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">});</span>

<span class="p">});</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="æ•°æ®åº“åŸºç¡€çŸ¥è¯†">æ•°æ®åº“åŸºç¡€çŸ¥è¯†</h3>

<h4 id="æ•°æ®åº“sql">æ•°æ®åº“ï¼ˆSQLï¼‰</h4>

<ul>
  <li>å…³ç³»å‹æ•°æ®åº“ï¼šå¦‚<code class="highlighter-rouge">MySQL</code>ã€<code class="highlighter-rouge">Oracle</code>
    <ul>
      <li>æœ€å¸¸è§ã€æœ€å¸¸ç”¨ï¼Œæ•°æ®ä¹‹é—´æ˜¯æœ‰å…³ç³»çš„</li>
      <li>å¤§å‹ç³»ç»Ÿçš„ä¸»æ•°æ®åº“é€šå¸¸æ˜¯å…³ç³»å‹æ•°æ®åº“</li>
      <li><code class="highlighter-rouge">MySQL</code>
        <ul>
          <li>å•†ä¸šå…è´¹ï¼Œç»å¤§å¤šæ•°æ™®é€šåº”ç”¨</li>
          <li>æ€§èƒ½å¾ˆé«˜ã€å®‰å…¨æ€§å¾ˆé«˜</li>
          <li>å®¹ç¾ç•¥å·®</li>
        </ul>
      </li>
      <li><code class="highlighter-rouge">Oracle</code>
        <ul>
          <li>å•†ä¸šæ”¶è´¹ä¸”æ˜‚è´µï¼Œå¦‚é‡‘èã€åŒ»ç–—å¸¸ç”¨</li>
          <li>å®¹ç¾ç‰¹åˆ«å¼º</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>æ–‡ä»¶å‹æ•°æ®åº“ï¼šå¦‚<code class="highlighter-rouge">sqlite</code>ï¼Œç®€å•ã€å°ï¼Œæ¯”å¦‚ä¿å­˜æ‰‹æœºé€šä¿¡å½•ã€é€šè¯è®°å½•</li>
  <li>æ–‡æ¡£å‹æ•°æ®åº“ï¼šå¦‚<code class="highlighter-rouge">MongoDB</code>ï¼Œç›´æ¥å­˜å‚¨å¼‚æ„æ•°æ®â€”â€”æ–¹ä¾¿</li>
  <li>å…¶ä»–</li>
</ul>

<h4 id="nosql">NoSQL</h4>

<ul>
  <li>æ²¡æœ‰å¤æ‚çš„å…³ç³»</li>
  <li>å¯¹<strong>æ€§èƒ½</strong>æœ‰æé«˜çš„è¦æ±‚</li>
  <li><code class="highlighter-rouge">redis</code>ã€<code class="highlighter-rouge">memcached</code>ã€<code class="highlighter-rouge">hypertable</code>ã€<code class="highlighter-rouge">bigtable</code></li>
</ul>

<h4 id="æ•°æ®ä»“åº“">æ•°æ®ä»“åº“</h4>

<p>æµ·é‡æ•°æ®</p>

<h1 id="å¤–è¯">å¤–è¯</h1>

<ul>
  <li>ç¨‹åºå‘˜å†…åŠŸ
    <ul>
      <li>ç®—æ³•</li>
      <li>è®¾è®¡æ¨¡å¼</li>
      <li>æ¶æ„</li>
    </ul>
  </li>
  <li>å¦‚ä½•åº”å¯¹é¡µé¢è¢«è¿è¥å•†åŠ«æŒ
    <ul>
      <li><code class="highlighter-rouge">HTTPS</code></li>
    </ul>
  </li>
  <li>è¿›ç¨‹ä¹‹é—´æ€ä¹ˆé€šä¿¡
    <ul>
      <li>ç®¡é“</li>
      <li>å…±äº«å†…å­˜</li>
      <li><code class="highlighter-rouge">socket</code></li>
    </ul>
  </li>
  <li>
    <p>å•çº¿ç¨‹å’Œéé˜»å¡<code class="highlighter-rouge">IO</code></p>

    <ul>
      <li>é˜»å¡<code class="highlighter-rouge">IO</code>ï¼šå¯¼è‡´æ•´ä¸ªç¨‹åºå¡ä½ä¸åŠ¨
        <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span><span class="o">=</span><span class="n">fopen</span><span class="p">(</span><span class="s">"a.txt"</span><span class="p">,</span> <span class="s">"r"</span><span class="p">);</span>
  <span class="n">size</span><span class="o">=</span><span class="n">fread</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span> <span class="n">fp</span><span class="p">);</span>
  <span class="c1">// &lt;-ç­‰å¾…20s</span>
  <span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
</code></pre></div>        </div>
      </li>
      <li>éé˜»å¡<code class="highlighter-rouge">IO</code>ï¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œä¸å¡
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="dl">'</span><span class="s1">a.txt</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>       <span class="c1">// &lt;-ç­‰å¾…0s</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>å‰ç«¯æŠŠåŠ å¯†æ•°æ®ä¼ åˆ°åå°ï¼Œåå°æ€ä¹ˆè¿›è¡Œæ ¡éªŒçš„
    <ul>
      <li>æ ¡éªŒç­¾å</li>
    </ul>
  </li>
  <li>æ€ä¹ˆåŠ å¯†çš„ æ€ä¹ˆè§£å¯†
    <ul>
      <li>æå…¶æˆç†Ÿçš„ç®—æ³•â€”â€”<code class="highlighter-rouge">RSA</code>ï¼ˆä¸€ç±»ç®—æ³•çš„æ€»ç§°ï¼‰</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">request.on('data', data=&gt;{})</code>çš„<code class="highlighter-rouge">on</code>æ˜¯ä¸€ç›´è½®å¯»å—ï¼Ÿ
    <ul>
      <li>ä¸æ˜¯ï¼Œæ˜¯ç›‘å¬ã€é€šçŸ¥ã€å›è°ƒã€å¼‚æ­¥</li>
    </ul>
  </li>
  <li>ctrl+cé€€å‡ºæ˜¯ä¸æ˜¯ä¼šè¢«ç›‘æµ‹åˆ°ï¼Œä¸Šæ¬¡åœ¨ç”Ÿäº§ç¯å¢ƒç”¨äº†ï¼Œè¢«æ‰¹è¯„äº†
    <ul>
      <li>ç¡®å®ä¸å¥½ï¼Œå®ƒæ˜¯å¼ºåˆ¶é€€å‡º</li>
    </ul>
  </li>
  <li>
    <p>å‰ç«¯å®¹ç¾ï¼šç£ç›˜å¢é‡é•œåƒ</p>
  </li>
  <li>nodeæœ‰ç¼“å­˜çš„æ¦‚å¿µå—ï¼Ÿ
    <ul>
      <li>æœ‰</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">node</code>çš„åƒåœ¾å›æ”¶
    <ul>
      <li>ä¹Ÿå°±æ˜¯<code class="highlighter-rouge">JavaScript</code>çš„<code class="highlighter-rouge">gc</code>ï¼Œå’Œ<code class="highlighter-rouge">Java</code>çš„<code class="highlighter-rouge">gc</code>å¾ˆç±»ä¼¼</li>
      <li>åªè¦æŸä¸ªä¸œè¥¿ä¸å†ä½¿ç”¨äº†ï¼Œé‡Šæ”¾æ‰æ‰€å æ®çš„å†…å­˜</li>
      <li>æ²¡æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶çš„è¯­è¨€ï¼ˆå¦‚<code class="highlighter-rouge">C</code>è¯­è¨€ï¼‰
        <ul>
          <li>ç¨‹åºå‘˜è‡ªå·±åŠ¨æ‰‹é‡Šæ”¾</li>
          <li>å¿˜äº†é‡Šæ”¾ï¼Œä¼šé€ æˆå†…å­˜æ³„æ¼
            <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">int</span> <span class="o">*</span><span class="n">arr</span><span class="o">=</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">);</span>
  <span class="c1">//...</span>
  <span class="n">free</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>     
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li>è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Œé€šå¸¸ä¼šé‡‡ç”¨å¼•ç”¨è®¡æ•°çš„æ–¹å¼
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Person</span> <span class="n">p</span><span class="o">=</span><span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
  <span class="nc">Person</span> <span class="n">p2</span><span class="o">=</span><span class="n">p</span><span class="o">;</span>
  <span class="n">p</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>   <span class="c1">//è¿˜å‰©1ä¸ª</span>
  <span class="c1">// ...</span>
  <span class="n">p2</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>  <span class="c1">//è¿˜å‰©0ä¸ªï¼Œå¯ä»¥å›æ”¶äº†</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>é‡æ–°å‘å¸ƒç¨‹åºåï¼Œæµè§ˆå™¨æ¯æ¬¡éœ€è¦ctrl+ræ¥å¼ºåˆ¶åˆ·æ–°ï¼Œå¦‚ä½•åšåˆ°F5åˆ·æ–°å°±å¯ä»¥è·å–æœ€æ–°èµ„æºå‘¢ï¼Ÿ
    <ul>
      <li>åå°é…ç½®</li>
      <li><code class="highlighter-rouge">&lt;script src="a.js?v=2018012323"&gt;&lt;/script&gt;</code></li>
    </ul>
  </li>
  <li>æœåŠ¡å™¨çš„ç¼“å†²æ± æ€ä¹ˆç†è§£
    <ul>
      <li>æœ€è¿‘ä½¿ç”¨çš„ã€æœ€å¸¸ä½¿ç”¨çš„èµ„æº(æ–‡ä»¶ã€æ•°æ®)ï¼Œç›´æ¥ç•™åœ¨å†…å­˜é‡Œ</li>
      <li>ç­–ç•¥-&gt;æé«˜ç¼“å†²å‘½ä¸­ç‡(å’Œå…·ä½“åœºæ™¯å…³ç³»å¾ˆå¤§)</li>
    </ul>
  </li>
</ul>
:ET